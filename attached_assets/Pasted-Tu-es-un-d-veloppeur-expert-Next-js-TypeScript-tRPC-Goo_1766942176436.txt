Tu es un dÃ©veloppeur expert Next.js / TypeScript / tRPC / Google Calendar API.

Contexte :
- Lâ€™application est dÃ©jÃ  fonctionnelle et le design (UI/UX) ne doit EN AUCUN CAS Ãªtre modifiÃ©.
- Le systÃ¨me actuel utilise une autre mÃ©thode de connexion Ã  Google Calendar.
- Je veux migrer vers un mode **OAuth 2.0 avec access_token + refresh_token**.
- Lâ€™objectif est de lier mon Google Calendar personnel Ã  lâ€™application de faÃ§on persistante.

ğŸ¯ Objectif principal :
Mettre en place une authentification **OAuth Google Calendar** avec gestion automatique du refresh token, afin que lâ€™application puisse accÃ©der au calendrier mÃªme aprÃ¨s expiration de lâ€™access token.

âš ï¸ Contraintes importantes :
- âŒ Ne pas modifier le design, les composants UI ou le parcours utilisateur.
- âŒ Ne pas casser le fonctionnement existant.
- âœ… Se limiter Ã  la logique backend / auth / services.
- âœ… Fonctionner correctement en environnement serverless (Vercel / Replit).

ğŸ” Exigences techniques :
1. Utiliser OAuth 2.0 Google avec les scopes minimum nÃ©cessaires :
   - https://www.googleapis.com/auth/calendar.readonly
   (ou calendar si Ã©criture nÃ©cessaire)
2. ImplÃ©menter la rÃ©cupÃ©ration et le stockage sÃ©curisÃ© du refresh_token.
3. Mettre en place un mÃ©canisme automatique de rafraÃ®chissement de lâ€™access_token.
4. Sâ€™assurer que le token est rÃ©utilisÃ© sans nÃ©cessiter de reconnexion utilisateur.
5. GÃ©rer proprement les erreurs OAuth (token expirÃ©, token rÃ©voquÃ©, permissions manquantes).

ğŸ“ Fichiers concernÃ©s (indicatif) :
- Service Google Calendar
- Routes API / tRPC
- Middleware dâ€™authentification
- Variables dâ€™environnement

ğŸ”‘ Variables dâ€™environnement attendues :
- GOOGLE_CLIENT_ID
- GOOGLE_CLIENT_SECRET
- GOOGLE_REDIRECT_URI
- GOOGLE_REFRESH_TOKEN (si dÃ©jÃ  obtenu)

ğŸ“Œ RÃ©sultat attendu :
- Le Google Calendar est correctement liÃ© via OAuth
- Les disponibilitÃ©s sont rÃ©cupÃ©rÃ©es sans interruption
- Aucun changement visuel dans lâ€™application
- Le systÃ¨me est stable en production

ğŸ§ª Bonus :
- Ajouter des logs clairs (sans exposer les tokens)
- Fournir une courte explication du flux OAuth mis en place
