# üîß Configuration Compte Administrateur

## ‚úÖ Corrections Effectu√©es

### 1. API d'Authentification
- ‚úÖ **Corrig√©**: Le fichier `api/auth/register.ts` utilise maintenant la vraie base de donn√©es PostgreSQL au lieu de la mock database
- ‚úÖ **Corrig√©**: Le fichier `api/auth/login.ts` utilise d√©j√† la vraie base de donn√©es
- ‚úÖ **Corrig√©**: Le fichier `api/appointments/index.ts` utilise maintenant la vraie base de donn√©es PostgreSQL
- ‚úÖ **Ajout√©**: Fichier `api/_lib/db-helpers.ts` pour centraliser les op√©rations de base de donn√©es

### 2. Compte Administrateur
Un nouveau compte administrateur a √©t√© cr√©√© avec les identifiants suivants :

#### üìß Identifiants de Connexion Admin
```
Email: doriansarry@yahoo.fr
Mot de passe: Admin123
```

### 3. Script de Cr√©ation Admin
Un script `scripts/create-admin.ts` a √©t√© cr√©√© pour faciliter la cr√©ation ou la mise √† jour du compte admin.

Pour l'ex√©cuter localement :
```bash
npm install
npx tsx scripts/create-admin.ts
```

**Note**: Ce script n√©cessite que la variable d'environnement `DATABASE_URL` soit configur√©e.

## üöÄ D√©ploiement sur Vercel

### √âtapes pour cr√©er le compte admin sur Vercel :

1. **Via Vercel CLI** (Recommand√©)
   ```bash
   # Se connecter √† Vercel
   vercel login

   # Ex√©cuter le script sur Vercel
   vercel env pull .env.local
   npx tsx scripts/create-admin.ts
   ```

2. **Via l'interface Vercel**
   - Allez dans votre projet sur vercel.com
   - Settings > Functions
   - Cr√©ez une fonction temporaire qui ex√©cute le script de cr√©ation d'admin
   - Ou utilisez la console Vercel CLI

3. **Manuellement via une route API temporaire**
   - Cr√©ez une route API temporaire qui appelle la fonction de cr√©ation d'admin
   - Appelez cette route une fois d√©ploy√©e
   - Supprimez la route apr√®s utilisation

### Variables d'Environnement Requises sur Vercel

Assurez-vous que ces variables sont configur√©es dans les param√®tres Vercel :

```env
DATABASE_URL=postgresql://...  # URL de votre base Neon PostgreSQL
JWT_SECRET=medplan-jwt-secret-key-2024-production
SESSION_SECRET=medplan-session-secret-2024-production
NODE_ENV=production
```

## üìù Cr√©ation Manuelle du Compte Admin

Si le script ne fonctionne pas, vous pouvez cr√©er le compte manuellement en utilisant l'endpoint d'inscription :

```bash
curl -X POST https://votre-app.vercel.app/api/auth/register?userType=admin \
  -H "Content-Type: application/json" \
  -d '{
    "email": "doriansarry@yahoo.fr",
    "password": "Admin123",
    "confirmPassword": "Admin123",
    "name": "Dorian Sarry"
  }'
```

## üîí Connexion

Une fois le compte cr√©√©, vous pouvez vous connecter via :

**URL de connexion**: `https://votre-app.vercel.app/login`

Utilisez les identifiants :
- Email: `doriansarry@yahoo.fr`
- Mot de passe: `Admin123`

## ‚ö†Ô∏è S√©curit√©

**IMPORTANT**: Apr√®s la premi√®re connexion, il est fortement recommand√© de :
1. Changer le mot de passe via l'interface admin
2. Activer l'authentification √† deux facteurs si disponible
3. Ne jamais partager ces identifiants
4. Supprimer ce fichier du d√©p√¥t git apr√®s configuration

## üîß D√©pannage

### Erreur "Email d√©j√† utilis√©"
Si vous obtenez cette erreur, le compte existe d√©j√†. Utilisez la fonction de r√©initialisation de mot de passe ou contactez le support.

### Erreur de connexion √† la base de donn√©es
V√©rifiez que :
- La variable `DATABASE_URL` est correctement configur√©e sur Vercel
- La base de donn√©es Neon est accessible
- Les tables ont √©t√© cr√©√©es (ex√©cutez les migrations si n√©cessaire)

### Erreur 500 sur l'API
Consultez les logs Vercel :
```bash
vercel logs
```

## üìû Support

Pour toute question ou probl√®me :
- Consultez les logs Vercel
- V√©rifiez la console navigateur pour les erreurs c√¥t√© client
- Contactez le d√©veloppeur

---

**Date de cr√©ation**: 2025-10-13
**Version**: 1.0.0
