# üöÄ Guide de D√©ploiement Vercel - Application Planning M√©dical

## ‚úÖ Statut du D√©ploiement

**L'application a √©t√© d√©ploy√©e avec succ√®s sur Vercel !**

### üìç URLs de D√©ploiement

- **URL de Production Principale**: `https://webapp-nfwsh4sfw-ikips-projects.vercel.app`
- **URL de D√©ploiement Secondaire**: `https://webapp-oco41it58-ikips-projects.vercel.app`
- **Project ID**: `prj_px2UcRuqcze9WorbfxfB563oTSGs`
- **Organisation ID**: `team_u81NHuzzLA66cTYpIrIXjmq0`

### ‚ö†Ô∏è PROBL√àME ACTUEL: Protection de D√©ploiement Activ√©e

Les URLs ci-dessus sont actuellement prot√©g√©es par l'authentification Vercel. Pour acc√©der √† l'application, vous devez :

## üîì √âtapes pour D√©sactiver la Protection de D√©ploiement

### Option 1 : Via le Dashboard Vercel (Recommand√©)

1. **Se Connecter au Dashboard Vercel**
   - Allez sur https://vercel.com
   - Connectez-vous avec votre compte

2. **Acc√©der au Projet**
   - Cliquez sur "Projects" dans la barre lat√©rale
   - S√©lectionnez le projet "webapp"

3. **D√©sactiver la Protection**
   - Allez dans "Settings" (‚öôÔ∏è)
   - Cliquez sur "Deployment Protection" dans le menu de gauche
   - Sous "Vercel Authentication", cliquez sur "Edit"
   - S√©lectionnez "Only Preview Deployments" ou "Disabled"
   - Cliquez sur "Save"

4. **Red√©ployer (si n√©cessaire)**
   - Si la protection ne se d√©sactive pas imm√©diatement
   - Allez dans l'onglet "Deployments"
   - Cliquez sur le dernier d√©ploiement
   - Cliquez sur "Redeploy"

### Option 2 : Via Vercel CLI

```bash
# Installer Vercel CLI (si pas d√©j√† install√©)
npm install -g vercel

# Se connecter
vercel login

# Naviguer vers le projet
cd /path/to/webapp

# Red√©ployer sans protection
vercel --prod
```

## üîß Configuration du Projet

### Variables d'Environnement Configur√©es

Les variables suivantes sont d√©j√† configur√©es dans Vercel :

- ‚úÖ `DATABASE_URL` : Connexion PostgreSQL Neon
- ‚úÖ `JWT_SECRET` : Cl√© secr√®te pour les tokens JWT

### Build Configuration

- **Build Command**: `npm run build`
- **Output Directory**: `dist`
- **Framework**: None (Hono avec adaptateur Vercel)
- **Node.js Version**: 20.x (compatible)

## üìù Modifications Apport√©es

### Fichiers Modifi√©s

1. **`vercel.json`** - Configuration Vercel simplifi√©e
2. **`src/index.tsx`** - Ajout de l'adaptateur Vercel et correction de syntaxe
3. **`vite.config.ts`** - Configuration du build pour ES modules
4. **`api/[[...route]].ts`** - Adaptateur API pour Vercel (nouveau fichier)

### Changements Techniques

- ‚úÖ Correction des erreurs de syntaxe (triple quotes supprim√©es)
- ‚úÖ Fix de la fonction async pour cr√©ation de rendez-vous
- ‚úÖ Adaptation du runtime : Node.js au lieu de Edge (compatibilit√© crypto/stream)
- ‚úÖ Configuration Vercel optimis√©e
- ‚úÖ Build r√©ussi et fonctionnel

## üß™ Tests √† Effectuer Apr√®s D√©sactivation de la Protection

### 1. Test de Base

```bash
# Tester la page d'accueil
curl https://webapp-nfwsh4sfw-ikips-projects.vercel.app/

# Tester l'API health check
curl https://webapp-nfwsh4sfw-ikips-projects.vercel.app/api/auth/me
```

### 2. Test de Connexion Admin

```bash
curl -X POST https://webapp-nfwsh4sfw-ikips-projects.vercel.app/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@example.com","password":"admin123","userType":"admin"}'
```

### 3. Test de Connexion Patient

1. **S'inscrire** : Ouvrez `https://webapp-nfwsh4sfw-ikips-projects.vercel.app` dans votre navigateur
2. Remplissez le formulaire d'inscription patient
3. Connectez-vous avec vos identifiants

### 4. Test de Prise de Rendez-vous

1. Connectez-vous en tant que patient
2. Acc√©dez au tableau de bord
3. Cliquez sur "Prendre rendez-vous"
4. S√©lectionnez un cr√©neau disponible
5. Confirmez le rendez-vous

### 5. Test du Tableau de Bord Admin

1. Connectez-vous en tant qu'admin (admin@example.com / admin123)
2. V√©rifiez les statistiques
3. Consultez la liste des patients
4. G√©rez les rendez-vous

## üìä Monitoring et Logs

### Consulter les Logs de D√©ploiement

1. Dashboard Vercel > Project "webapp" > Deployments
2. Cliquez sur un d√©ploiement pour voir les logs d√©taill√©s

### Consulter les Logs d'Ex√©cution

```bash
# Via CLI
vercel logs https://webapp-nfwsh4sfw-ikips-projects.vercel.app

# Ou via Dashboard
Dashboard > Project > Functions (onglet)
```

## üêõ D√©pannage

### Probl√®me : 404 Not Found

**Solution** : V√©rifiez que le build a r√©ussi et que les fichiers sont dans `dist/`

### Probl√®me : 500 Internal Server Error

**Causes possibles** :
1. Variables d'environnement mal configur√©es
2. Erreur de connexion √† la base de donn√©es
3. Erreur dans le code

**Solution** :
- Consultez les logs dans le Dashboard Vercel
- V√©rifiez les variables d'environnement
- Testez la connexion √† la base de donn√©es

### Probl√®me : CORS Errors

**Solution** : Le CORS est d√©j√† configur√© dans `src/index.tsx`. Si le probl√®me persiste, v√©rifiez la configuration.

## üìö Ressources Utiles

- [Documentation Vercel](https://vercel.com/docs)
- [Hono Framework](https://hono.dev/)
- [Vercel CLI Reference](https://vercel.com/docs/cli)
- [Deployment Protection Guide](https://vercel.com/docs/security/deployment-protection)

## üîó Liens Importants

- **Repository GitHub**: https://github.com/doriansarry47-creator/planning
- **Dashboard Vercel**: https://vercel.com/ikips-projects/webapp
- **URL de Production**: https://webapp-nfwsh4sfw-ikips-projects.vercel.app

## ‚úÖ Checklist Post-D√©ploiement

- [ ] D√©sactiver la protection de d√©ploiement Vercel
- [ ] Tester l'acc√®s √† la page d'accueil
- [ ] Tester l'inscription d'un patient
- [ ] Tester la connexion admin
- [ ] Tester la prise de rendez-vous
- [ ] V√©rifier le tableau de bord admin
- [ ] Configurer un domaine personnalis√© (optionnel)
- [ ] Activer les notifications d'erreur
- [ ] Documenter l'URL finale pour les utilisateurs

---

**Date de D√©ploiement**: 2025-10-30
**Version**: 1.0.0
**Statut**: ‚úÖ D√©ploiement R√©ussi - ‚ö†Ô∏è Protection √† D√©sactiver
